# Оптимизация контекста — Проблема и решение

## Проблема

- Контекст сжимается между сессиями
- RAG не хранит полную историю
- Я забываю детали через 1-2 сессии
- Повторяю вопросы, теряю время

## Решения

### 1. Полная история в файлах (основное)

**Структура:**
```
memory/
├── 2026-02-23.md          # Сегодня (подробно)
├── 2026-02-22.md          # Вчера (подробно)
├── 2026-02-21.md          # Позавчера (кратко)
└── archive/               # Архив (только ключевое)

PROJECT_BIBLE.md           # Правила, которые не меняются
FULL_HISTORY.md            # Полная история проекта
DECISIONS_LOG.md           # Все принятые решения
```

**Что записывать:**
- ✅ Все решения (да/нет, почему)
- ✅ Технические детали (версии, ключи)
- ✅ Проблемы и решения
- ✅ Что НЕ работало
- ✅ Контекст разговора (кратко)

### 2. Чеклист перед сессией

**Я должен читать:**
1. `PROJECT_BIBLE.md` — правила
2. `FULL_HISTORY.md` — что было
3. `memory/YYYY-MM-DD.md` — вчера
4. `DECISIONS_LOG.md` — ключевые решения

**Время:** 2-3 минуты на чтение

### 3. Структура записи

**Каждое сообщение должно содержать:**
```markdown
## [Время] — [Тема]

### Контекст
- Почему это важно
- Что было до этого

### Решение
- Что сделали
- Почему так

### Следующие шаги
- Что делать дальше
- Кто ответственный

### Файлы
- Где сохранено
- Как найти
```

### 4. Поиск по памяти

**Ключевые слова для поиска:**
- Имена файлов
- Названия компонентов
- Даты
- Решения (да/нет)

### 5. Проблемы и фиксы

| Проблема | Решение |
|----------|---------|
| Забыл детали | Записывать сразу, не "потом" |
| Не найти файл | Стандартные имена, даты в названиях |
| Контекст потерян | Читать memory/ перед сессией |
| Решения не ясны | DECISIONS_LOG с причинами |

## Что я обязуюсь делать

1. **Перед каждой сессией** — читать PROJECT_BIBLE и последний memory/
2. **Во время сессии** — записывать в memory/YYYY-MM-DD.md
3. **После сессии** — обновить FULL_HISTORY.md
4. **Если не помню** — искать в файлах, не спрашивать повторно

## Проверка

- [ ] Читаю PROJECT_BIBLE перед работой
- [ ] Проверяю memory/ за последние 2 дня
- [ ] Записываю все решения
- [ ] Обновляю FULL_HISTORY

---

**Создано:** 2026-02-23
**Статус:** Внедряется
